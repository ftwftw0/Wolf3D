/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   fdf.h                                              :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: flagoutt <marvin@42.fr>                    +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2014/12/03 19:15:12 by flagoutt          #+#    #+#             */
/*   Updated: 2015/01/24 03:20:15 by flagoutt         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#ifndef FDF_H
# define FDF_H
# define PI 3.141592
# define WIDTH 320
# define HEIGHT 200
# include "libft.h"
# include <mlx.h>
# include <math.h>
# include <unistd.h>
# include <stdio.h>
# include </usr/X11R6/include/X11/X.h>

/*
**	Define your own keys
*/
# define STRAFELEFT 65361
# define STRAFERIGHT 65363
# define FORWARD 65362
# define DOWNWARD 65364

typedef struct		s_ipoint
{
	int				x;
	int				y;
	int				color;
}					t_ipoint;

typedef struct		s_dpoint
{
	double			x;
	double			y;
	int				color;
}					t_dpoint;

typedef struct		s_img
{
	void			*ptr;
	t_ipoint		size;
	int				bpp;
	int				sizeline;
	int				endian;
}					t_img;

typedef struct		s_env
{
	void			*mlx;
	void			*window;
}					t_env;

typedef struct		s_mlxdata
{
	t_env			env;
	t_ipoint		playerpos;
	t_ipoint		a;
	t_ipoint		b;
	t_img			img;
	t_grid			*grid;
	int				color;
	int				xdepth;
	int				ydepth;
	int				zdepth;
	int				mvspeed;
	int				rotspeed;
	double			viewangle;
	t_hooks			hooks;
}					t_mlxdata;

typedef struct		s_grid
{
	int				**table;
	int				columns;
}					t_grid;

typedef struct		s_hooks
{
	int				forward;
	int				backward;
	int				strafeleft;
	int				straferight;
	int				camleft;
	int				camright;
}					t_hooks;

int					mlx_putline(t_mlxdata *data, t_ipoint a, t_ipoint b);
void				swap_xy(t_ipoint *a, t_ipoint *b);
void				swap_points(t_ipoint *a, t_ipoint *b);
int					key_hook(int keycode, t_mlxdata *data);
int					keypress_hook(int keycode, t_mlxdata *data);
int					mouse_hook(int button, int x, int y, t_mlxdata *data);
int					expose_hook(t_mlxdata *data);
int					loop_hook(t_mlxdata *data);
t_mlxdata			*ft_init(int argc, char **argv);
t_grid				*ft_mktable(char *path);
int					*ft_createline(char *str);
int					ft_countcolumns(char *str);
void				ft_puttab(t_grid *grid);
int					mlx_putgrid(t_mlxdata *data, t_grid *grid);
int					mlx_cleanwindow(t_mlxdata *data);
t_img				mlx_create_image(t_mlxdata *data,
									int xsize,
									int ysize,
									int bpp);
int					mlx_putpxl_img(t_mlxdata *data, int x, int y, int color);
void				swap_points(t_ipoint *a, t_ipoint *b);
int		            wolf_view(t_mlxdata *data);
int					horiz_walldist(t_mlxdata *data, t_ipoint playerpos, double angle);
int					verti_walldist(t_mlxdata *data, t_ipoint playerpos, double angle);
int					nearestwalldist(t_mlxdata *data, t_ipoint playerpos, double angle);
int					wolf_move(t_mlxdata *data, int direction);
#endif
